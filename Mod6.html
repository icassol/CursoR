<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />


<meta name="author" content="Ignacio Cassol" />

<meta name="date" content="2019-04-30" />

<title>Webs con Shiny</title>

<script src="Mod6_files/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="Mod6_files/bootstrap-3.3.7/css/bootstrap.min.css" rel="stylesheet" />
<script src="Mod6_files/bootstrap-3.3.7/js/bootstrap.min.js"></script>
<script src="Mod6_files/bootstrap-3.3.7/shim/html5shiv.min.js"></script>
<script src="Mod6_files/bootstrap-3.3.7/shim/respond.min.js"></script>
<script src="Mod6_files/navigation-1.1/tabsets.js"></script>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #0000ff; } /* Keyword */
code > span.ch { color: #008080; } /* Char */
code > span.st { color: #008080; } /* String */
code > span.co { color: #008000; } /* Comment */
code > span.ot { color: #ff4000; } /* Other */
code > span.al { color: #ff0000; } /* Alert */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #008000; font-weight: bold; } /* Warning */
code > span.cn { } /* Constant */
code > span.sc { color: #008080; } /* SpecialChar */
code > span.vs { color: #008080; } /* VerbatimString */
code > span.ss { color: #008080; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { } /* Variable */
code > span.cf { color: #0000ff; } /* ControlFlow */
code > span.op { } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #ff4000; } /* Preprocessor */
code > span.do { color: #008000; } /* Documentation */
code > span.an { color: #008000; } /* Annotation */
code > span.cv { color: #008000; } /* CommentVar */
code > span.at { } /* Attribute */
code > span.in { color: #008000; } /* Information */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' || rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>


<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>




<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>



<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Webs con Shiny</h1>
<h4 class="author">Ignacio Cassol</h4>
<h4 class="date">2019-04-30</h4>

</div>

<div id="TOC">
<ul>
<li><a href="#que-es-shiny"><span class="toc-section-number">1</span> Qué es Shiny</a></li>
<li><a href="#estructura-de-una-aplicacion-shiny"><span class="toc-section-number">2</span> Estructura de una aplicación Shiny</a></li>
<li><a href="#mi-primer-shiny-app"><span class="toc-section-number">3</span> Mi primer Shiny app</a></li>
<li><a href="#ejecucion-de-una-shiny-app"><span class="toc-section-number">4</span> Ejecución de una Shiny app</a></li>
<li><a href="#construccion-de-la-interface-de-usuario-ui"><span class="toc-section-number">5</span> Construcción de la interface de usuario (UI)</a><ul>
<li><a href="#layouts"><span class="toc-section-number">5.1</span> Layouts</a></li>
<li><a href="#input-widget"><span class="toc-section-number">5.2</span> Input widget</a></li>
</ul></li>
</ul>
</div>

<!-- see http://rmarkdown.rstudio.com/ for details in formatting -->
<div id="que-es-shiny" class="section level1">
<h1><span class="header-section-number">1</span> Qué es Shiny</h1>
<p><em>(Para profundizar contenidos de este curso, o aprender otros aspectos no incluidos, sugerimos tener en cuenta <a href="https://shiny.rstudio.com/tutorial/">este tutorial de Shiny</a>).</em></p>
<p>Shiny es un paquete de R que facilita la creación de aplicaciones web interactivas (aplicaciones) directamente desde R. Shiny viene con una variedad de widgets para la construcción rapida de interfaces de usuario web, nosotros escribimos el codigo en R y shiny hará el trabajo pesado de generar el HTML, css, javascript, jquery, etc.</p>
<p>Si aún no has instalado el paquete <code>Shiny</code>, abre una sesión R, conéctate a Internet y ejecuta:</p>
<pre><code>install.packages(&quot;shiny&quot;)
library(&quot;shiny&quot;)</code></pre>
</div>
<div id="estructura-de-una-aplicacion-shiny" class="section level1">
<h1><span class="header-section-number">2</span> Estructura de una aplicación Shiny</h1>
<p>Las aplicaciones de <code>Shiny</code> deben tener tres componentes:</p>
<ul>
<li><p><strong>UI</strong>: un objeto de interfaz (user interface) de usuario. Esta componente: gestiona los inputs y organiza la visualización de los datos. “Dialoga” con el server (el 2º componente), que es quien procesa los datos, quien gestiona la información.</p></li>
<li><p><strong>server</strong>: una función de servidor (server function). Esta componente tiene las estructuras de datos y la algoritmia de la aplicación.</p></li>
<li><p><strong>app</strong>: una llamada a la función <code>shinyApp</code>. Es el compomente en donde se define la ubicación del <code>UI</code> y del <code>server</code>. Es el componente que se ejecuta (“Run”) para testear/utilizar la app.</p></li>
</ul>
<p>Es decir: La interfaz de usuario (<code>ui</code>) controla el diseño y la apariencia de su aplicación. La función <code>server</code> contiene las instrucciones que el ordenador necesita para construir la aplicación. Finalmente, la función <code>shinyApp</code> crea objetos de aplicación <code>Shiny</code> a partir de un par de <code>UI/server</code> explícito.</p>
<p>Inicialmente, para aprender, vamos a crear un script “app.R”, que contendrá los tres componentes. Luego, las aplicaciones de Shiny más complejas tienen, al menos, un script para cada componente.</p>
</div>
<div id="mi-primer-shiny-app" class="section level1">
<h1><span class="header-section-number">3</span> Mi primer Shiny app</h1>
<p>Primero, haremos nuestra primera <code>Shiny app</code>, y luego explicaremos cómo funciona:</p>
<p>1º Crea un nuevo script.</p>
<p>2º Pega el siguiente código:</p>
<div class="sourceCode" id="numCode"><table class="sourceCode R numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
</pre></td><td class="sourceCode"><pre><code class="sourceCode r"><span class="kw">library</span>(shiny)

<span class="co"># Define UI for app that draws a histogram ----</span>
ui &lt;-<span class="st"> </span><span class="kw">fluidPage</span>(

  <span class="co"># App title ----</span>
  <span class="kw">titlePanel</span>(<span class="st">&quot;Hello Shiny!&quot;</span>),

  <span class="co"># Sidebar layout with input and output definitions ----</span>
  <span class="kw">sidebarLayout</span>(

    <span class="co"># Sidebar panel for inputs ----</span>
    <span class="kw">sidebarPanel</span>(

      <span class="co"># Input: Slider for the number of bins ----</span>
      <span class="kw">sliderInput</span>(<span class="dt">inputId =</span> <span class="st">&quot;bins&quot;</span>,
                  <span class="dt">label =</span> <span class="st">&quot;Number of bins:&quot;</span>,
                  <span class="dt">min =</span> <span class="dv">1</span>,
                  <span class="dt">max =</span> <span class="dv">50</span>,
                  <span class="dt">value =</span> <span class="dv">30</span>)

    ),

    <span class="co"># Main panel for displaying outputs ----</span>
    <span class="kw">mainPanel</span>(

      <span class="co"># Output: Histogram ----</span>
      <span class="kw">plotOutput</span>(<span class="dt">outputId =</span> <span class="st">&quot;distPlot&quot;</span>)

    )
  )
)

<span class="co"># Define server logic required to draw a histogram ----</span>
server &lt;-<span class="st"> </span><span class="cf">function</span>(input, output) {

  <span class="co"># Histogram of the Old Faithful Geyser Data ----</span>
  <span class="co"># with requested number of bins</span>
  <span class="co"># This expression that generates a histogram is wrapped in a call</span>
  <span class="co"># to renderPlot to indicate that:</span>
  <span class="co">#</span>
  <span class="co"># 1. It is &quot;reactive&quot; and therefore should be automatically</span>
  <span class="co">#    re-executed when inputs (input$bins) change</span>
  <span class="co"># 2. Its output type is a plot</span>
  output<span class="op">$</span>distPlot &lt;-<span class="st"> </span><span class="kw">renderPlot</span>({

    x    &lt;-<span class="st"> </span>faithful<span class="op">$</span>waiting
    bins &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="kw">min</span>(x), <span class="kw">max</span>(x), <span class="dt">length.out =</span> input<span class="op">$</span>bins <span class="op">+</span><span class="st"> </span><span class="dv">1</span>)

    <span class="kw">hist</span>(x, <span class="dt">breaks =</span> bins, <span class="dt">col =</span> <span class="st">&quot;#75AADB&quot;</span>, <span class="dt">border =</span> <span class="st">&quot;white&quot;</span>,
         <span class="dt">xlab =</span> <span class="st">&quot;Waiting time to next eruption (in mins)&quot;</span>,
         <span class="dt">main =</span> <span class="st">&quot;Histogram of waiting times&quot;</span>)

    })

}

<span class="co"># Create Shiny app ----</span>
<span class="kw">shinyApp</span>(<span class="dt">ui =</span> ui, <span class="dt">server =</span> server)</code></pre></td></tr></table></div>
<p>3º Selecciona todo el texto y ejecútalo. Deberías ver la aplicación funcionando similar a esto:</p>
<div class="figure">
<img src="https://github.com/icassol/platform-samples/blob/master/HelloShiny.png?raw=true" />

</div>
<p>4º Prueba la aplicación modificando el <strong>sliderInput</strong> del <em>Number of bins:</em>. Verás que se modifica el histograma.</p>
<p>5º Si quieres, también puedes hacer click en “Open in Browser” para ver la aplicación como una ventana más de tu browser.</p>
<hr />
<p>Ahora identifiquemos los tres componentes en el ejemplo anterior:</p>
<ul>
<li>el objeto <code>UI</code> (primer componente) está implementado entre las filas 4 y la 32.</li>
<li>la función <code>server</code> (segundo componente) está implementado entre las filas 35 y 56.</li>
<li>la llamada a función (tercer componente) está en la última fila (59).</li>
</ul>
<p>Es una buena práctica, que cada componente esté en archivos diferentes:</p>
<ul>
<li>ui.r: sólo contiene la codificación de interface de usuario.</li>
<li>server.r: sólo contiene las funciones que debe realizar el servidor.</li>
<li>app.r: sólo contiene el llamdo a Shiny, en la se señala dónde está es UI y el server.</li>
</ul>
<p>Más adelante, vemos un ejemplo sobre esta buena práctica.</p>
</div>
<div id="ejecucion-de-una-shiny-app" class="section level1">
<h1><span class="header-section-number">4</span> Ejecución de una Shiny app</h1>
<ul>
<li><p>Opción 1: Ejecutando el script <code>app.r</code> presionando el boton “Run”. (Es la opción que utilizaste para ejecutar la app <code>Hello Shiny</code>)</p></li>
<li><p>Opción 2: También se puede ejecutar el comando por consola:</p></li>
</ul>
<pre><code>runApp(&quot;my_app&quot;)</code></pre>
<hr />
</div>
<div id="construccion-de-la-interface-de-usuario-ui" class="section level1">
<h1><span class="header-section-number">5</span> Construcción de la interface de usuario (UI)</h1>
<p>La UI en Shiny utiliza código HTML. Vamos a usar la función <code>fluidPage</code> para crear una pantalla que se ajusta automáticamente a las dimensiones de la ventana del navegador. Para diseñar la interfaz de usuario de su aplicación, hay que agregar elementos dentro de la función <code>fluidPage</code>.</p>
<p>La función <code>fluidPage</code> contiene <code>layouts</code> y, a su vez, los <code>layouts</code> contienen <code>paneles</code>.</p>
<div id="layouts" class="section level2">
<h2><span class="header-section-number">5.1</span> Layouts</h2>
<p>Los <code>layouts</code> se utilizan para organizar los paneles y elementos dentro de un layout existente. A continuación, verás algunos layouts y cómo es su estructura interna:</p>
<div class="figure">
<img src="https://github.com/icassol/platform-samples/blob/master/Layouts.png?raw=true" />

</div>
<p>Ejemplo:</p>
<div class="sourceCode" id="numCode"><table class="sourceCode R numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre></td><td class="sourceCode"><pre><code class="sourceCode r"><span class="kw">library</span>(shiny)
<span class="kw">fluidPage</span>(
  <span class="kw">titlePanel</span>(<span class="st">&quot;Hello Shiny!&quot;</span>),
  <span class="kw">sidebarLayout</span>(
    <span class="kw">sidebarPanel</span>(<span class="kw">HTML</span>(<span class="st">&#39;&lt;p&gt;</span>
<span class="st">         &lt;label&gt;A numeric input:&lt;/label&gt;&lt;br /&gt; </span>
<span class="st">         &lt;input type=&quot;number&quot; name=&quot;n&quot; value=&quot;7&quot; min=&quot;1&quot; max=&quot;30&quot; /&gt;</span>
<span class="st">         &lt;/p&gt;&#39;</span>)),
    <span class="kw">mainPanel</span>(
      <span class="kw">p</span>(<span class="kw">strong</span>(<span class="st">&quot;bold font &quot;</span>), <span class="kw">em</span>(<span class="st">&quot;italic font&quot;</span>)),
      <span class="kw">p</span>(<span class="kw">code</span>(<span class="st">&quot;code block&quot;</span>)),
      <span class="kw">a</span>(<span class="dt">href=</span><span class="st">&quot;http://www.google.com&quot;</span>, <span class="st">&quot;link to Google&quot;</span>))
  )
)</code></pre></td></tr></table></div>
<p>En el código anterior, puedes identificar:</p>
<ul>
<li>el título del panel (línea 3).</li>
<li>el uso de layout <code>sidebarLayout</code> (línea 4) con sus dos partes:
<ul>
<li><code>sidebarPanel</code> (línea 5).</li>
<li><code>mainPanel</code> (línea 9).</li>
</ul></li>
</ul>
<hr />
<p>Como se puede observar en el ejemplo, la UI permite intercalar código HTML.</p>
</div>
<div id="input-widget" class="section level2">
<h2><span class="header-section-number">5.2</span> Input widget</h2>
<p>Los widgets son controles con los que el usuario va a interactuar, es decir que mediante estos controles el usuario va a comunicarse con nuestra aplicacion, filtrar, seleccionar, ingresar un dato por parámetro.</p>
<table>
<thead>
<tr class="header">
<th>function</th>
<th>widget</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>actionButton</td>
<td>Botón para acciones</td>
</tr>
<tr class="even">
<td>checkboxGroupInput</td>
<td>Un grupo de checkboxes</td>
</tr>
<tr class="odd">
<td>checkboxInput</td>
<td>Un simple checkbox</td>
</tr>
<tr class="even">
<td>dateInput</td>
<td>Seleccion de una fecha</td>
</tr>
<tr class="odd">
<td>dateRangeInput</td>
<td>Seleccion de un par de fechas</td>
</tr>
<tr class="even">
<td>fileInput</td>
<td>Subir un archivo</td>
</tr>
<tr class="odd">
<td>helpText</td>
<td>Texto de ayuda para otro control</td>
</tr>
<tr class="even">
<td>numericInput</td>
<td>Campo para insertar un dato numÃ©rico</td>
</tr>
<tr class="odd">
<td>radioButtons</td>
<td>Un grupo de radio buttons</td>
</tr>
<tr class="even">
<td>selectInput</td>
<td>Clasica caja con opciones para seleccionar</td>
</tr>
<tr class="odd">
<td>sliderInput</td>
<td>Control para seleccionar un dato numérico</td>
</tr>
<tr class="even">
<td>submitButton</td>
<td>Un boton de submit</td>
</tr>
<tr class="odd">
<td>textInput</td>
<td>Campo para ingresar un dato de texto</td>
</tr>
</tbody>
</table>
<p>Output de algunos widgets:</p>
<div class="figure">
<img src="https://github.com/icassol/platform-samples/blob/master/Basicwidgets.png?raw=true" />

</div>
<p>Probemos algunos de ellos usando, como base, el layout del ejemplo anterior:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(shiny)
<span class="kw">fluidPage</span>(
  <span class="kw">titlePanel</span>(<span class="st">&quot;Mi primera Shiny App&quot;</span>),
  <span class="kw">sidebarLayout</span>(
    <span class="kw">sidebarPanel</span>(
      <span class="kw">numericInput</span>(<span class="st">&quot;numInput&quot;</span>, <span class="st">&quot;Ingresa un número:&quot;</span>, <span class="dt">value =</span> <span class="dv">7</span>, <span class="dt">min =</span> <span class="dv">1</span>, <span class="dt">max =</span> <span class="dv">30</span>),
      <span class="kw">actionButton</span>(<span class="st">&quot;MiBoton&quot;</span>,<span class="st">&quot;Boton&quot;</span>),
      <span class="kw">checkboxInput</span>(<span class="st">&quot;MiCheBox&quot;</span>, <span class="st">&quot;CheckBox&quot;</span>, <span class="ot">FALSE</span>)
      ),
    <span class="kw">mainPanel</span>(
      <span class="kw">p</span>(<span class="kw">strong</span>(<span class="st">&quot;bold font &quot;</span>), <span class="kw">em</span>(<span class="st">&quot;italic font&quot;</span>)),
      <span class="kw">p</span>(<span class="kw">code</span>(<span class="st">&quot;code block&quot;</span>)),
      <span class="kw">a</span>(<span class="dt">href=</span><span class="st">&quot;http://rusersgroup.com/&quot;</span>, <span class="st">&quot;R User Group&quot;</span>))
  )
)</code></pre></div>
<div class="container-fluid">
<h2>Mi primera Shiny App</h2>
<div class="row">
<div class="col-sm-4">
<form class="well">
<div class="form-group shiny-input-container">
<label for="numInput">Ingresa un número:</label>
<input id="numInput" type="number" class="form-control" value="7" min="1" max="30"/>
</div>
<button id="MiBoton" type="button" class="btn btn-default action-button">Boton</button>
<div class="form-group shiny-input-container">
<div class="checkbox">
<label>
<input id="MiCheBox" type="checkbox"/>
<span>CheckBox</span>
</label>
</div>
</div>
</form>
</div>
<div class="col-sm-8">
<p>
<strong>bold font </strong>
<em>italic font</em>
</p>
<p>
<code>code block</code>
</p>
<a href="http://rusersgroup.com/">R User Group</a>
</div>
</div>
</div>
</div>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
